<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match - eFotball wannabe</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
        .match-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Pre-Match Setup */
        .match-setup {
            background: rgba(0, 0, 51, 0.8);
            border: 2px solid rgba(255, 237, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }

        .match-setup h2 {
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .team-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .team-card {
            background: rgba(0, 20, 220, 0.4);
            border: 2px solid rgba(255, 237, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .team-card h3 {
            color: var(--secondary);
            margin-bottom: 15px;
        }

        .vs-badge {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        .team-stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-match {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: var(--secondary);
            color: #000;
            text-transform: uppercase;
        }

        .btn-match:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 237, 0, 0.5);
        }

        .btn-match:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cooldown-msg {
            color: #f59e0b;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        /* ============================================
           FM-STYLE LIVE MATCH VIEW
           ============================================ */
        .match-live {
            display: none;
        }

        .match-live.active {
            display: block;
        }

        /* Match Header / Scoreboard */
        .fm-scoreboard {
            background: linear-gradient(180deg, #0a1628 0%, #0d1f3c 100%);
            border: 2px solid rgba(255, 237, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .fm-scoreboard-main {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 30px;
        }

        .fm-team {
            text-align: center;
        }

        .fm-team-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .fm-team-formation {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .fm-score-center {
            text-align: center;
        }

        .fm-score {
            font-size: 4rem;
            font-weight: bold;
            color: white;
            letter-spacing: 10px;
        }

        .fm-match-time {
            font-size: 1.5rem;
            color: var(--accent);
            margin-top: 5px;
        }

        .fm-half-indicator {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        /* Main Match Area - Pitch + Stats */
        .fm-match-area {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .fm-match-area {
                grid-template-columns: 1fr;
            }
        }

        /* 2D Pitch */
        .fm-pitch-container {
            background: linear-gradient(180deg, #0a1628 0%, #0d1f3c 100%);
            border: 2px solid rgba(255, 237, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            position: relative;
        }

        .fm-pitch {
            width: 100%;
            aspect-ratio: 1.5;
            background: linear-gradient(180deg,
                    #1a472a 0%, #1a472a 10%,
                    #1e5631 10%, #1e5631 20%,
                    #1a472a 20%, #1a472a 30%,
                    #1e5631 30%, #1e5631 40%,
                    #1a472a 40%, #1a472a 50%,
                    #1e5631 50%, #1e5631 60%,
                    #1a472a 60%, #1a472a 70%,
                    #1e5631 70%, #1e5631 80%,
                    #1a472a 80%, #1a472a 90%,
                    #1e5631 90%, #1e5631 100%);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        /* Pitch markings */
        .fm-pitch::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 255, 255, 0.5);
        }

        .fm-pitch::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
        }

        /* Penalty areas */
        .fm-penalty-area {
            position: absolute;
            width: 35%;
            height: 25%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            left: 50%;
            transform: translateX(-50%);
        }

        .fm-penalty-area.top {
            top: 0;
            border-top: none;
        }

        .fm-penalty-area.bottom {
            bottom: 0;
            border-bottom: none;
        }

        /* Player dots */
        .fm-player-dot {
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
            z-index: 2;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .fm-player-dot.home {
            background: var(--secondary);
            border: 2px solid #fff;
        }

        .fm-player-dot.away {
            background: #e74c3c;
            border: 2px solid #fff;
        }

        .fm-player-dot.gk {
            background: #f39c12 !important;
        }

        /* Ball */
        .fm-ball {
            position: absolute;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            transition: all 0.8s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        /* Event highlight on pitch */
        .fm-pitch-highlight {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 237, 0, 0.6) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: pulseHighlight 1s ease-out forwards;
            z-index: 5;
        }

        @keyframes pulseHighlight {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        /* Stats Panel */
        .fm-stats-panel {
            background: linear-gradient(180deg, #0a1628 0%, #0d1f3c 100%);
            border: 2px solid rgba(255, 237, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .fm-stats-title {
            color: var(--secondary);
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .fm-stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .fm-stat-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: white;
            min-width: 30px;
            text-align: center;
        }

        .fm-stat-bar-container {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
            display: flex;
        }

        .fm-stat-bar {
            height: 100%;
            transition: width 0.5s ease;
        }

        .fm-stat-bar.home {
            background: var(--secondary);
        }

        .fm-stat-bar.away {
            background: #e74c3c;
        }

        .fm-stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            text-align: center;
            margin-bottom: 5px;
        }

        /* Commentary Log */
        .fm-commentary {
            background: linear-gradient(180deg, #0a1628 0%, #0d1f3c 100%);
            border: 2px solid rgba(255, 237, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            max-height: 250px;
            overflow-y: auto;
        }

        .fm-commentary-title {
            color: var(--secondary);
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .fm-event {
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            animation: slideInEvent 0.4s ease-out;
        }

        @keyframes slideInEvent {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .fm-event-time {
            min-width: 40px;
            font-weight: bold;
            color: var(--secondary);
        }

        .fm-event-icon {
            font-size: 1.2rem;
        }

        .fm-event-text {
            flex: 1;
            color: rgba(255, 255, 255, 0.9);
        }

        .fm-event.goal-home {
            background: linear-gradient(90deg, rgba(255, 237, 0, 0.2) 0%, transparent 100%);
            border-left: 4px solid var(--secondary);
        }

        .fm-event.goal-away {
            background: linear-gradient(90deg, rgba(231, 76, 60, 0.2) 0%, transparent 100%);
            border-left: 4px solid #e74c3c;
        }

        .fm-event.card {
            background: linear-gradient(90deg, rgba(241, 196, 15, 0.2) 0%, transparent 100%);
            border-left: 4px solid #f1c40f;
        }

        .fm-event.chance {
            background: linear-gradient(90deg, rgba(52, 152, 219, 0.2) 0%, transparent 100%);
            border-left: 4px solid #3498db;
        }

        .fm-event.normal {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid rgba(255, 255, 255, 0.3);
        }

        .fm-event.halftime {
            background: linear-gradient(90deg, rgba(155, 89, 182, 0.2) 0%, transparent 100%);
            border-left: 4px solid #9b59b6;
            text-align: center;
            justify-content: center;
        }

        /* Chance Overlay */
        .chance-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .chance-overlay.active {
            display: flex;
        }

        .chance-title {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }

        .chance-buttons {
            display: flex;
            gap: 20px;
        }

        .chance-btn {
            padding: 30px 50px;
            font-size: 1.5rem;
            border: 3px solid var(--accent);
            background: rgba(255, 215, 0, 0.1);
            color: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chance-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: scale(1.1);
        }

        .chance-timer {
            margin-top: 20px;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Match Result */
        .match-result {
            display: none;
            background: linear-gradient(180deg, #0a1628 0%, #0d1f3c 100%);
            border: 3px solid rgba(255, 237, 0, 0.5);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
        }

        .match-result.show {
            display: block;
            animation: fadeInResult 0.5s ease-out;
        }

        @keyframes fadeInResult {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-title {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }

        .result-score {
            font-size: 5rem;
            font-weight: bold;
            color: var(--secondary);
            margin: 20px 0;
            letter-spacing: 20px;
        }

        .result-outcome {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
            text-transform: uppercase;
        }

        .result-outcome.win {
            color: #27ae60;
        }

        .result-outcome.draw {
            color: var(--warning);
        }

        .result-outcome.loss {
            color: #e74c3c;
        }

        .result-rewards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 400px;
            margin: 30px auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .result-reward-item {
            text-align: center;
        }

        .result-reward-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
        }

        .result-reward-label {
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">‚öΩ eFOOTBALL WANNABE</div>
        <div class="top-bar-right">
            <div class="currency-display">
                <span class="currency-item">ü™ô <span id="topEcoins">0</span></span>
                <span class="currency-item">üí∞ <span id="topGP">0</span></span>
            </div>
            <div class="top-icons">
                <button class="icon-btn" onclick="window.location.href='/dashboard'" title="Dashboard">üìä</button>
                <button class="icon-btn" onclick="window.location.href='/mail'" title="Mail">üì¨</button>
                <button class="icon-btn" onclick="window.location.href='/logout'" title="Logout">üö™</button>
            </div>
        </div>
    </nav>

    <div class="match-container">
        <!-- Pre-Match Setup -->
        <div class="match-setup" id="matchSetup">
            <h2>‚öΩ KICK OFF</h2>
            <p id="squadStatus" style="margin: 15px 0; font-size: 1.1em;"></p>

            <div class="team-comparison">
                <div class="team-card">
                    <h3>Your Team</h3>
                    <div class="team-stat">
                        <span>Strength:</span>
                        <span id="playerStrength">--</span>
                    </div>
                    <div class="team-stat">
                        <span>Players:</span>
                        <span id="playerCount">0/11</span>
                    </div>
                </div>
                <div class="vs-badge">VS</div>
                <div class="team-card">
                    <h3 id="opponentName">???</h3>
                    <div class="team-stat">
                        <span>Strength:</span>
                        <span id="opponentStrength">??</span>
                    </div>
                </div>
            </div>

            <button class="btn-match" id="playBtn" onclick="startMatch()" disabled>
                ‚öΩ START MATCH
            </button>
            <div class="cooldown-msg" id="cooldownMsg" style="display: none;"></div>
        </div>

        <!-- FM-Style Live Match View -->
        <div class="match-live" id="matchLive">
            <!-- Scoreboard -->
            <div class="fm-scoreboard">
                <div class="fm-scoreboard-main">
                    <div class="fm-team">
                        <div class="fm-team-name" id="livePlayerName">Your Team</div>
                        <div class="fm-team-formation" id="homeFormation">4-3-3</div>
                    </div>
                    <div class="fm-score-center">
                        <div class="fm-score" id="liveScore">0 - 0</div>
                        <div class="fm-match-time" id="matchTime">0'</div>
                        <div class="fm-half-indicator" id="halfIndicator">1ST HALF</div>
                    </div>
                    <div class="fm-team">
                        <div class="fm-team-name" id="liveOpponentName">Opponent</div>
                        <div class="fm-team-formation" id="awayFormation">4-4-2</div>
                    </div>
                </div>
            </div>

            <!-- Pitch + Stats -->
            <div class="fm-match-area">
                <!-- 2D Pitch -->
                <div class="fm-pitch-container">
                    <div class="fm-pitch" id="fmPitch">
                        <div class="fm-penalty-area top"></div>
                        <div class="fm-penalty-area bottom"></div>
                        <!-- Player dots will be added by JS -->
                        <div class="fm-ball" id="fmBall" style="left: 50%; top: 50%;"></div>
                    </div>
                </div>

                <!-- Stats Panel -->
                <div class="fm-stats-panel">
                    <div class="fm-stats-title">üìä Match Stats</div>

                    <div class="fm-stat-label">Possession</div>
                    <div class="fm-stat-row">
                        <div class="fm-stat-value" id="possHome">50%</div>
                        <div class="fm-stat-bar-container">
                            <div class="fm-stat-bar home" id="possBarHome" style="width: 50%;"></div>
                            <div class="fm-stat-bar away" id="possBarAway" style="width: 50%;"></div>
                        </div>
                        <div class="fm-stat-value" id="possAway">50%</div>
                    </div>

                    <div class="fm-stat-label">Shots</div>
                    <div class="fm-stat-row">
                        <div class="fm-stat-value" id="shotsHome">0</div>
                        <div class="fm-stat-bar-container">
                            <div class="fm-stat-bar home" id="shotsBarHome" style="width: 50%;"></div>
                            <div class="fm-stat-bar away" id="shotsBarAway" style="width: 50%;"></div>
                        </div>
                        <div class="fm-stat-value" id="shotsAway">0</div>
                    </div>

                    <div class="fm-stat-label">Shots on Target</div>
                    <div class="fm-stat-row">
                        <div class="fm-stat-value" id="sotHome">0</div>
                        <div class="fm-stat-bar-container">
                            <div class="fm-stat-bar home" id="sotBarHome" style="width: 50%;"></div>
                            <div class="fm-stat-bar away" id="sotBarAway" style="width: 50%;"></div>
                        </div>
                        <div class="fm-stat-value" id="sotAway">0</div>
                    </div>

                    <div class="fm-stat-label">Corners</div>
                    <div class="fm-stat-row">
                        <div class="fm-stat-value" id="cornersHome">0</div>
                        <div class="fm-stat-bar-container">
                            <div class="fm-stat-bar home" id="cornersBarHome" style="width: 50%;"></div>
                            <div class="fm-stat-bar away" id="cornersBarAway" style="width: 50%;"></div>
                        </div>
                        <div class="fm-stat-value" id="cornersAway">0</div>
                    </div>

                    <div class="fm-stat-label">Fouls</div>
                    <div class="fm-stat-row">
                        <div class="fm-stat-value" id="foulsHome">0</div>
                        <div class="fm-stat-bar-container">
                            <div class="fm-stat-bar home" id="foulsBarHome" style="width: 50%;"></div>
                            <div class="fm-stat-bar away" id="foulsBarAway" style="width: 50%;"></div>
                        </div>
                        <div class="fm-stat-value" id="foulsAway">0</div>
                    </div>
                </div>
            </div>

            <!-- Commentary -->
            <div class="fm-commentary">
                <div class="fm-commentary-title">üìù Live Commentary</div>
                <div id="matchEvents">
                    <!-- Events will be added here -->
                </div>
            </div>
        </div>

        <!-- Chance Overlay -->
        <div class="chance-overlay" id="chanceOverlay">
            <div class="chance-title" id="chanceTitle">üéØ CHANCE! Choose your shot!</div>
            <div class="chance-buttons">
                <button class="chance-btn" onclick="selectChance('left')">‚¨ÖÔ∏è Left</button>
                <button class="chance-btn" onclick="selectChance('center')">‚¨ÜÔ∏è Center</button>
                <button class="chance-btn" onclick="selectChance('right')">‚û°Ô∏è Right</button>
            </div>
            <div class="chance-timer" id="chanceTimer">Time remaining: 10s</div>
        </div>

        <!-- Match Result -->
        <div class="match-result" id="matchResult">
            <div class="result-title">FULL TIME</div>
            <div class="result-score" id="finalScore">0 - 0</div>
            <div class="result-outcome" id="matchOutcome">DRAW</div>

            <div class="result-rewards">
                <div class="result-reward-item">
                    <div class="result-reward-value" id="rewardGP">+0</div>
                    <div class="result-reward-label">üí∞ GP</div>
                </div>
                <div class="result-reward-item">
                    <div class="result-reward-value" id="rewardECoins">+0</div>
                    <div class="result-reward-label">ü™ô eCoins</div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="resetMatch()" style="margin-top: 20px;">
                üîÑ Play Again
            </button>
        </div>
    </div>

    <script src="/match.js"></script>
</body>

</html>